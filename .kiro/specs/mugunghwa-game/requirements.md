# 무궁화 게임 시스템 요구사항 문서

## 소개

오징어 게임을 모티브로 한 인터랙티브 무궁화 게임 시스템입니다. 플레이어는 로봇이 뒤를 돌고 있을 때만 움직일 수 있으며, LED 점멸 순서를 기억하여 발판을 같은 순서로 밟아 점수를 획득해야 합니다. 총 7점을 획득하면 게임을 클리어할 수 있습니다.

## 요구사항

### 요구사항 1: 게임 초기화 및 시작

**사용자 스토리:** 플레이어로서, 게임을 시작할 수 있는 명확한 방법이 있어야 하고, 게임 시작 시 시각적/청각적 피드백을 받을 수 있어야 한다.

#### 승인 기준
1. WHEN 플레이어가 시작 버튼을 누르면 THEN 시스템은 모든 조명을 소등 상태에서 시작해야 한다
2. WHEN 게임이 시작되면 THEN 시스템은 메인 조명 4개를 1번부터 4번까지 0.5초 간격으로 순차 점등해야 한다
3. WHEN 각 조명이 점등될 때 THEN 시스템은 해당하는 효과음을 재생해야 한다
4. WHEN 모든 메인 조명이 점등되면 THEN 로봇 몸체가 플레이어 방향으로 180도 회전해야 한다
5. WHEN 로봇이 정면을 바라보면 THEN 내부 리미트 스위치가 작동하고 환영 내레이션이 재생되어야 한다

### 요구사항 2: 게임 라운드 진행

**사용자 스토리:** 플레이어로서, 로봇이 뒤를 돌고 있을 때만 움직일 수 있고, LED 점멸 패턴을 기억하여 발판을 조작할 수 있어야 한다.

#### 승인 기준
1. WHEN 로봇 몸체가 후면으로 180도 회전 완료되면 THEN 초록색 경광등이 점등되어야 한다
2. WHEN 초록색 경광등이 점등되면 THEN 4개의 LED가 레벨에 따른 패턴으로 점멸해야 한다
3. WHEN LED가 점멸할 때 THEN 각각 해당하는 효과음이 재생되어야 한다
4. WHEN 플레이어가 발판을 밟으면 THEN 해당 발판의 효과음이 재생되어야 한다
5. WHEN 초록색 경광등이 점등된 후 10초가 지나면 THEN 로봇 HEAD가 정면으로 회전을 시작해야 한다
6. IF 하나의 LED가 연속으로 점멸하는 패턴이 생성되면 THEN 시스템은 다른 패턴을 재생성해야 한다

### 요구사항 3: 동작 감지 및 처벌

**사용자 스토리:** 플레이어로서, 로봇이 나를 바라볼 때 움직이면 처벌을 받아야 하고, 이를 명확하게 인지할 수 있어야 한다.

#### 승인 기준
1. WHEN 로봇 HEAD가 정면을 완전히 바라보면 THEN 초록색 경광등이 소등되고 빨간색 경광등이 점등되어야 한다
2. WHEN 빨간색 경광등이 점등되면 THEN 4개의 PIR 센서가 5초간 동작감지를 시작해야 한다
3. WHEN 동작감지 시간 중 움직임이 감지되면 THEN 총소리 효과음이 재생되어야 한다
4. WHEN 움직임이 감지되면 THEN 이펙트 LED가 0.2초 간격으로 5회 점멸해야 한다
5. WHEN 움직임이 감지되면 THEN 점수가 1점 감점되어야 한다
6. WHEN 동작감지 시간 5초가 완료되면 THEN 로봇 HEAD가 다시 후면으로 회전해야 한다

### 요구사항 4: 점수 시스템 및 표시

**사용자 스토리:** 플레이어로서, 현재 점수를 시각적으로 확인할 수 있어야 하고, 점수 변화를 명확하게 인지할 수 있어야 한다.

#### 승인 기준
1. WHEN 플레이어가 올바른 순서로 발판을 밟으면 THEN 1점이 추가되어야 한다
2. WHEN 점수가 증가하면 THEN 해당하는 점수 LED가 점등되어야 한다
3. WHEN 점수가 감소하면 THEN 해당하는 점수 LED가 소등되어야 한다
4. WHEN 점수가 0점인 상태에서 감점되면 THEN 점수는 0점을 유지해야 한다
5. WHEN 점수가 6점에 도달하면 THEN 6개의 점수 LED가 모두 점등되어야 한다
6. WHEN 점수가 7점에 도달하면 THEN 6개의 점수 LED가 0.5초 간격으로 7회 점멸하며 클리어를 표시해야 한다
7. IF 점수 표시를 위해 THEN 시스템은 6개의 점수 LED를 사용해야 한다

### 요구사항 5: 레벨 시스템 및 난이도 조절

**사용자 스토리:** 플레이어로서, 게임이 진행될수록 난이도가 증가하는 것을 체감할 수 있어야 하고, 적절한 도전감을 느낄 수 있어야 한다.

#### 승인 기준
1. WHEN 한 라운드가 완료되면 THEN 레벨이 1씩 증가해야 한다
2. WHEN 레벨이 1-4일 때 THEN LED는 (레벨+1)개만큼 0.5초 간격으로 점멸해야 한다
3. WHEN 레벨이 5-10일 때 THEN LED는 5개만큼 0.3초 간격으로 점멸해야 한다
4. WHEN 레벨이 11일 때 THEN LED는 6개만큼 0.3초 간격으로 점멸해야 한다
5. WHEN 레벨 11을 완료해도 7점에 도달하지 못하면 THEN 레벨 1부터 다시 시작해야 한다

### 요구사항 6: 게임 클리어 및 종료

**사용자 스토리:** 플레이어로서, 게임을 성공적으로 클리어했을 때 만족감을 느낄 수 있는 연출과 보상을 받을 수 있어야 한다.

#### 승인 기준
1. WHEN 플레이어가 7점을 획득하면 THEN 클리어 효과가 시작되어야 한다
2. WHEN 클리어 효과가 시작되면 THEN 이펙트 LED가 특별한 패턴으로 연출되어야 한다
3. WHEN 클리어 효과가 완료되면 THEN EM-Lock이 작동하여 다음 세션으로의 통로가 열려야 한다
4. WHEN 게임이 클리어되면 THEN 모든 장치가 최소 전력 대기 상태로 전환되어야 한다

### 요구사항 7: 하드웨어 제어 및 안전성

**사용자 스토리:** 시스템 관리자로서, 하드웨어가 안정적으로 동작하고 예상치 못한 상황에서도 안전하게 작동해야 한다.

#### 승인 기준
1. WHEN 버튼 입력이 발생하면 THEN 시스템은 디바운싱 처리를 해야 한다
2. WHEN 모터가 정지하면 THEN 모든 모터 핀에 5초간 HIGH 신호를 인가해야 한다
3. WHEN 시리얼 통신이 필요하면 THEN Master와 Slave 보드 간 명령을 정확히 전달해야 한다
4. WHEN 내레이션/BGM 재생이 필요하면 THEN Master 보드의 DFPlayer가 처리해야 한다
5. WHEN 효과음 재생이 필요하면 THEN Slave 보드의 DFPlayer가 처리해야 한다
6. WHEN 리미트 스위치가 작동하면 THEN 해당 모터의 회전이 정확히 정지되어야 한다

### 요구사항 8: 사용자 경험 및 피드백

**사용자 스토리:** 플레이어로서, 게임의 현재 상태와 다음에 해야 할 행동을 직관적으로 이해할 수 있어야 한다.

#### 승인 기준
1. WHEN 게임의 각 단계가 진행되면 THEN 적절한 시각적 피드백(LED, 경광등)이 제공되어야 한다
2. WHEN 게임의 각 단계가 진행되면 THEN 적절한 청각적 피드백(효과음, 내레이션)이 제공되어야 한다
3. WHEN 플레이어가 올바른 행동을 하면 THEN 긍정적인 피드백이 제공되어야 한다
4. WHEN 플레이어가 잘못된 행동을 하면 THEN 명확한 부정적인 피드백이 제공되어야 한다
5. WHEN 게임이 진행되면 THEN 현재 레벨과 점수를 시각적으로 확인할 수 있어야 한다